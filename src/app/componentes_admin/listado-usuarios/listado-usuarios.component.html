<div class="container">
    <h2>Listado de Usuarios</h2>
    <!-- Desplegable para filtrar por rol -->
    <label for="roleFilter">Filtrar por rol:</label>

    <select id="roleFilter" (change)="filtrarPorRol($event)">
        <option value="">Seleccionar rol</option>
    
        <option *ngFor="let rol of roles" [value]="rol">{{ rol }}</option>
    </select>
    <form class="form-inline">
        <!-- searchInput para conectar lo al .ts -->
        <input #searchInput type="search" class="form-control" placeholder="search">
    </form>
    <table class="table">
        <thead>
            <tr>
                <th>ID 
                    <button (click)="cambiarOrdenId()">
                        {{ ordenId ? '‚¨ÜÔ∏è' : '‚¨áÔ∏è' }}
                    </button>
                </th>
                <th>Usuario 
                    <button (click)="cambiarOrdenNickname()">
                        {{ ordenNickname ? '‚¨ÜÔ∏è' : '‚¨áÔ∏è' }}
                    </button>
                </th>
                <th>Email</th>
                <th></th>
                <th></th>
                <th></th>
            </tr>
        </thead>

        <tbody>
            @if (users.length != 0) {

                @for (user of users; track $index) {
                    <tr>
                        <td>{{ user.id }}</td>
                        <td>{{ user.nickname }}</td>
                        <td>{{ user.email }}</td>
                        <!-- Pasa la ruta y el id del usuario que usaremos para buscar al usuario mas tarde-->
                        <td><a [routerLink]="['/infoUser', user.id]">Mostrar</a></td>
                        <td><a (click)="borrarUsuario(user.id)">üóëÔ∏è Borrar</a></td>
                        <td><a [routerLink]="['/users-list/modificar', user.id]">‚úèÔ∏è Modificar</a></td>
                        
                    </tr>
                }

            }@else {
                <!-- Por si no existen usuarios o no llega ninguno por la peticion -->
                 <h3>No hay ningun usuario en la base de datos</h3>
            }
        
          
        </tbody>
    </table>

    <div class="pagination">
        <button (click)="goToPage(currentPage - 1)" [disabled]="currentPage === 0">Anterior</button>
        <span>P√°gina {{ currentPage + 1 }} de {{ totalPages }}</span>
        <button (click)="goToPage(currentPage + 1)" [disabled]="currentPage >= totalPages - 1">Siguiente</button>
    </div>
</div>
